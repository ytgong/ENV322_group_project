---
title: "R Notebook"
output: html_notebook
---
```{r}
library(dataRetrieval)
library(tidyverse)
library(EcoHydRology)
library(dygraphs)
library(xts)
library(dplyr)
library(viridis)
```

```{r}
hyp1_sites = read.csv("../FL_CSV/hyp1_sites.csv")

hyp1_sites = hyp1_sites[-c(1), ]
hyp1_sites = cbind(hyp1_sites,county_nm = c("Jefferson County","Madison County","Lafayette County","Levy County","Levy County","Gilchrist County", "Columbia County", "Columbia County","Citrus County","Citrus County","Citrus County","Marion County","Marion County", "Lee County", "Hendry County","Volusia County","Brevard County","Brevard County","Brevard County","Brevard County","Indian River County"))


wateruse <- readNWISuse(stateCd = "Florida",
                         countyCd = "ALL",
                         year = "2015",
                        categories = c("IT","LI","TP","IN","PO")) ## IT = irrigation, LI = livestock, TP = total population, IN = industrial, CO = commercial

wateruse_cleaned <- wateruse %>%
  select(county_nm,
         total_pop = Total.Population.total.population.of.area..in.thousands,
         industrial = Industrial.total.self.supplied.withdrawals..surface.water..in.Mgal.d,
         thermoelectric = Thermoelectric.Power..Once.through.cooling..total.self.supplied.withdrawals..surface.water..in.Mgal.,
         livestock = Livestock.self.supplied.surface.water.withdrawals..fresh..in.Mgal.d,
         irrigation = Irrigation..Total.total.self.supplied.withdrawals..surface.water..in.Mgal.d)

hyp1 <- merge(hyp1_sites,wateruse_cleaned,by="county_nm")
hyp2.full = hyp1[order(hyp1$station_nm),]

chemodata = read.csv("../Processed_Dataframes/RBI_CHEMO_data.csv")
hyp2.full = merge(hyp2.full,chemodata, by="site_no")
# These numbers are slope of regression lines from C-Q plots
hyp2.full_cleaned = hyp2.full %>%
  rename(chemo = chemo.coef,
         abschemo = chemo.coef.abs)

write.csv(hyp2.full_cleaned, file = "../Processed_Dataframes/hyp2+chemo.csv")
write.csv(wateruse_cleaned, file = "../Processed_Dataframes/wateruse.csv")

```

